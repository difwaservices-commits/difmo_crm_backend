openapi: 3.0.0
paths:
  /:
    get:
      operationId: AppController_getHello
      parameters: []
      responses:
        "200":
          description: ""
      tags:
        - App
  /auth/login:
    post:
      operationId: AuthController_login
      parameters: []
      responses:
        "201":
          description: ""
      tags: &a1
        - Auth
  /auth/register:
    post:
      operationId: AuthController_register
      parameters: []
      responses:
        "201":
          description: ""
      tags: *a1
  /auth/profile:
    get:
      operationId: AuthController_getProfile
      parameters: []
      responses:
        "200":
          description: ""
      tags: *a1
  /company:
    post:
      operationId: CompanyController_create
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateCompanyDto"
      responses:
        "201":
          description: ""
      tags: &a2
        - Company
  /company/id/{id}:
    get:
      operationId: CompanyController_findById
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: ""
      tags: *a2
  /company/{email}:
    get:
      operationId: CompanyController_findOne
      parameters:
        - name: email
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: ""
      tags: *a2
  /company/{id}:
    patch:
      operationId: CompanyController_update
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: ""
      tags: *a2
  /departments:
    post:
      operationId: DepartmentController_create
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateDepartmentDto"
      responses:
        "201":
          description: ""
      tags: &a3
        - Department
    get:
      operationId: DepartmentController_findAll
      parameters:
        - name: companyId
          required: true
          in: query
          schema:
            type: string
      responses:
        "200":
          description: ""
      tags: *a3
  /departments/{id}:
    get:
      operationId: DepartmentController_findOne
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: ""
      tags: *a3
    patch:
      operationId: DepartmentController_update
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateDepartmentDto"
      responses:
        "200":
          description: ""
      tags: *a3
    delete:
      operationId: DepartmentController_remove
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: ""
      tags: *a3
  /employees:
    post:
      operationId: EmployeeController_create
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateEmployeeDto"
      responses:
        "201":
          description: ""
      tags: &a4
        - Employee
    get:
      operationId: EmployeeController_findAll
      parameters: []
      responses:
        "200":
          description: ""
      tags: *a4
  /employees/fix-roles:
    post:
      operationId: EmployeeController_fixRoles
      parameters: []
      responses:
        "201":
          description: ""
      tags: *a4
  /employees/stats/count:
    get:
      operationId: EmployeeController_getCount
      parameters:
        - name: companyId
          required: true
          in: query
          schema:
            type: string
      responses:
        "200":
          description: ""
      tags: *a4
  /employees/{id}:
    get:
      operationId: EmployeeController_findOne
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: ""
      tags: *a4
    put:
      operationId: EmployeeController_update
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateEmployeeDto"
      responses:
        "200":
          description: ""
      tags: *a4
    delete:
      operationId: EmployeeController_remove
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: ""
      tags: *a4
  /attendance/check-in:
    post:
      operationId: AttendanceController_checkIn
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CheckInDto"
      responses:
        "201":
          description: ""
      tags: &a5
        - Attendance
  /attendance/bulk-check-in:
    post:
      operationId: AttendanceController_bulkCheckIn
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BulkCheckInDto"
      responses:
        "201":
          description: ""
      tags: *a5
  /attendance/check-out:
    post:
      operationId: AttendanceController_checkOut
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CheckOutDto"
      responses:
        "201":
          description: ""
      tags: *a5
  /attendance:
    post:
      operationId: AttendanceController_create
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateAttendanceDto"
      responses:
        "201":
          description: ""
      tags: *a5
    get:
      operationId: AttendanceController_findAll
      parameters: []
      responses:
        "200":
          description: ""
      tags: *a5
  /attendance/today/{employeeId}:
    get:
      operationId: AttendanceController_getTodayAttendance
      parameters:
        - name: employeeId
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: ""
      tags: *a5
  /attendance/analytics:
    get:
      operationId: AttendanceController_getAnalytics
      parameters: []
      responses:
        "200":
          description: ""
      tags: *a5
  /attendance/{id}:
    get:
      operationId: AttendanceController_findOne
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: ""
      tags: *a5
  /leaves:
    post:
      operationId: LeavesController_create
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateLeaveDto"
      responses:
        "201":
          description: ""
      tags: &a6
        - Leaves
    get:
      operationId: LeavesController_findAll
      parameters: []
      responses:
        "200":
          description: ""
      tags: *a6
  /leaves/{id}:
    get:
      operationId: LeavesController_findOne
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: ""
      tags: *a6
  /leaves/{id}/status:
    patch:
      operationId: LeavesController_updateStatus
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateLeaveStatusDto"
      responses:
        "200":
          description: ""
      tags: *a6
info:
  title: Difmo CRM API
  description: The Difmo CRM API description
  version: "1.0"
  contact: {}
tags: []
servers:
  - url: http://localhost:3000
    description: Development
  - url: https://api.difmocrm.com
    description: Production
components:
  securitySchemes:
    bearer:
      scheme: bearer
      bearerFormat: JWT
      type: http
  schemas:
    CreateCompanyDto:
      type: object
      properties: {}
    CreateDepartmentDto:
      type: object
      properties: {}
    UpdateDepartmentDto:
      type: object
      properties: {}
    CreateEmployeeDto:
      type: object
      properties: {}
    UpdateEmployeeDto:
      type: object
      properties: {}
    CheckInDto:
      type: object
      properties: {}
    BulkCheckInDto:
      type: object
      properties: {}
    CheckOutDto:
      type: object
      properties: {}
    CreateAttendanceDto:
      type: object
      properties: {}
    CreateLeaveDto:
      type: object
      properties: {}
    UpdateLeaveStatusDto:
      type: object
      properties: {}
